<configuration>

    <!--application.yml에서 목적지 주소 관리-->
    <springProperty scope="context" name="LOGSTASH_HOST" source="logstash.host"/>
    <!--인덱스로 추가할 서비스명-->
    <springProperty scope="context" name="APP_NAME" source="spring.application.name"/>

    <logger name="ELK_LOGGER" level="INFO">
        <appender-ref ref="LOGSTASH"/>
    </logger>

    <appender name="LOGSTASH" class="net.logstash.logback.appender.LogstashTcpSocketAppender">
        <!--로그 수집 후 출력할 주소-->
        <destination>${LOGSTASH_HOST}</destination>
        <encoder class="net.logstash.logback.encoder.LogstashEncoder">
            <!--커스텀해 키바나에서 추가적으로 확인할 필드-->
            <customFields>{"index":"${APP_NAME}"}</customFields>
        </encoder>
    </appender>

</configuration>